(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d89b4ab"],{"0c50":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("v-col",{attrs:{lg:"4",md:"6",sm:"8","offset-lg":"4","offset-md":"3","offset-sm":"2"}},[s("v-card",{attrs:{loading:e.registerDisabled}},[s("v-card-title",{staticClass:"d-flex justify-center"},[s("p",{domProps:{textContent:e._s(e.$t("users.Register"))}})]),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("ui-input",{attrs:{autofocus:"",label:e.$t("users.Username"),"error-messages":e.username&&!e.validUsername?e.$t("errors.ErrUsernameRequirements",{min:5}):e.errors.username,icon:"mdi-account"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.username,callback:function(r){e.username="string"===typeof r?r.trim():r},expression:"username"}})],1),s("v-col",{attrs:{cols:"12"}},[s("ui-input",{attrs:{disabled:"",label:e.$t("users.Email"),icon:"mdi-email",type:"email"},model:{value:e.email,callback:function(r){e.email="string"===typeof r?r.trim():r},expression:"email"}})],1),s("v-col",{attrs:{cols:"12"}},[s("ui-password-input",{attrs:{label:e.$t("users.Password"),"error-messages":e.password&&!e.validPassword?e.$t("errors.ErrPasswordRequirements",{min:8}):e.errors.password},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}})],1),s("v-col",{attrs:{cols:"12"}},[s("ui-password-input",{attrs:{label:e.$t("users.ConfirmPassword"),"error-messages":""===e.confirmPassword||e.samePassword?"":e.$t("errors.ErrPasswordsNotIdentical")},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.confirmPassword,callback:function(r){e.confirmPassword=r},expression:"confirmPassword"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"primary",large:"",block:"",disabled:!e.canComplete},domProps:{textContent:e._s(e.$t("users.Register"))},on:{click:e.submit}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{text:"",block:"",to:{name:"Login"}},domProps:{textContent:e._s(e.$t("users.LoginLink"))}})],1)],1)],1)],1)],1)},a=[],n=s("1da1"),o=(s("96cf"),s("61f7")),i={data:function(){return{username:"",email:this.$route.query.email,password:"",confirmPassword:"",registerDisabled:!1,errors:{username:"",password:""}}},computed:{canComplete:function(){return!this.registerDisabled&&(!(!this.username||!this.validUsername)&&!(!this.validPassword||!this.samePassword))},validPassword:function(){return o["a"].validPassword(this.password)},samePassword:function(){return o["a"].samePassword(this.password,this.confirmPassword)},validUsername:function(){return o["a"].validUsername(this.username)}},mounted:function(){this.hasAuth()&&this.$router.push({name:"Servers"})},methods:{submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.errors.username="",e.errors.password="",e.username){r.next=5;break}return e.errors.username=e.$t("errors.ErrFieldRequired",{field:e.$t("users.Username")}),r.abrupt("return");case 5:if(e.password){r.next=8;break}return e.errors.password=e.$t("errors.ErrFieldRequired",{field:e.$t("users.Password")}),r.abrupt("return");case 8:if(o["a"].validPassword(e.password)){r.next=10;break}return r.abrupt("return");case 10:return e.registerDisabled=!0,s="verifyToken",r.prev=12,r.next=15,e.$api.login(e.email,e.$route.query.token,{silent:!0});case 15:return s="update",r.next=18,e.$api.updateSelf(e.username,e.email,e.$route.query.token,{noToast:!0});case 18:return r.next=20,e.$api.updatePassword(e.$route.query.token,e.password,{noToast:!0});case 20:return s="login",r.next=23,e.$api.login(e.email,e.password,{noToast:!0});case 23:e.$emit("logged-in"),e.$router.push({name:"Servers"}),r.next=30;break;case 27:r.prev=27,r.t0=r["catch"](12),"verifyToken"===s?e.$toast.error(e.$t("errors.ErrInviteLinkInvalid")):"update"===s?e.$toast.error(e.$t("errors.ErrSavingInvitedUser")):(e.$toast.success(e.$t("users.RegisterSuccess")),e.$router.push({name:"Login"}));case 30:return r.prev=30,e.registerDisabled=!1,r.finish(30);case 33:case"end":return r.stop()}}),r,null,[[12,27,30,33]])})))()}}},u=i,l=s("2877"),d=s("6544"),c=s.n(d),m=s("8336"),p=s("b0af"),f=s("99d9"),w=s("62ad"),v=s("0fd9"),b=Object(l["a"])(u,t,a,!1,null,null,null);r["default"]=b.exports;c()(b,{VBtn:m["a"],VCard:p["a"],VCardText:f["c"],VCardTitle:f["d"],VCol:w["a"],VRow:v["a"]})},"61f7":function(e,r,s){"use strict";s("ac1f"),s("00b4");r["a"]={validPassword:function(e){return e.length>=8},samePassword:function(e,r){return e&&r&&e===r},validUsername:function(e){return e&&/^([0-9A-Za-z_-]){5,}$/.test(e)},validEmail:function(e){return e&&/^\S+@\S+\.\S+$/.test(e)}}}}]);
//# sourceMappingURL=chunk-3d89b4ab-legacy.e8ae9ac3.js.map