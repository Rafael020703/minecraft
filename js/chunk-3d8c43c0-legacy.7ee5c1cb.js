(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d8c43c0"],{"61f7":function(t,e,r){"use strict";r("ac1f"),r("00b4");e["a"]={validPassword:function(t){return t.length>=8},samePassword:function(t,e){return t&&e&&t===e},validUsername:function(t){return t&&/^([0-9A-Za-z_-]){5,}$/.test(t)},validEmail:function(t){return t&&/^\S+@\S+\.\S+$/.test(t)}}},"77be":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",[r("v-card-title",{domProps:{textContent:t._s(t.$t("users.ChangeInfo"))}}),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("ui-input",{attrs:{icon:"mdi-account",label:t.$t("users.Username")},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),r("v-col",{attrs:{cols:"12"}},[r("ui-input",{attrs:{icon:"mdi-email",label:t.$t("users.Email"),type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("v-col",{attrs:{cols:"12"}},[r("ui-password-input",{attrs:{label:t.$t("users.ConfirmPassword")},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{large:"",block:"",color:"success",disabled:!t.canSubmitInfoChange},domProps:{textContent:t._s(t.$t("users.ChangeInfo"))},on:{click:t.submitInfoChange}})],1)],1)],1)],1)],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",[r("v-card-title",{domProps:{textContent:t._s(t.$t("users.ChangePassword"))}}),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("ui-password-input",{attrs:{label:t.$t("users.OldPassword")},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),r("v-col",{attrs:{cols:"12"}},[r("ui-password-input",{attrs:{label:t.$t("users.NewPassword")},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),r("v-col",{attrs:{cols:"12"}},[r("ui-password-input",{attrs:{label:t.$t("users.ConfirmPassword")},model:{value:t.confirmNewPassword,callback:function(e){t.confirmNewPassword=e},expression:"confirmNewPassword"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{large:"",block:"",color:"success",disabled:!t.canSubmitPassChange},domProps:{textContent:t._s(t.$t("users.ChangePassword"))},on:{click:t.submitPassChange}})],1)],1)],1)],1)],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[r("span",{domProps:{textContent:t._s(t.$t("users.Otp"))}}),r("span",{staticClass:"flex-grow-1"}),r("v-btn",{attrs:{loading:t.otpLoading,disabled:t.otpLoading,color:t.getOtpBtnColor()},domProps:{textContent:t._s(t.otpActive?t.$t("users.OtpDisable"):t.$t("users.OtpEnable"))},on:{click:t.toggleOtp}})],1),r("v-card-text",{domProps:{textContent:t._s(t.$t("users.OtpHint"))}})],1)],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("ui-oauth")],1)],1),r("ui-overlay",{attrs:{card:"",closable:"",title:t.$t("users.OtpSetup")},model:{value:t.otpEnroll.started,callback:function(e){t.$set(t.otpEnroll,"started",e)},expression:"otpEnroll.started"}},[r("v-row",[r("v-col",[r("v-row",[r("v-col",[r("h3",{domProps:{textContent:t._s(t.$t("users.OtpSetupHint"))}})])],1),r("v-row",[r("v-col",[r("h4",{domProps:{textContent:t._s(t.$t("users.OtpSecret"))}})])],1),r("v-row",[r("v-col",[r("span",{domProps:{textContent:t._s(t.otpEnroll.secret)}})])],1),r("v-row",[r("v-col",[r("h3",{domProps:{textContent:t._s(t.$t("users.OtpConfirm"))}})])],1),r("v-row",[r("v-col",[r("ui-input",{attrs:{autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirmOtpEnroll.apply(null,arguments)}},model:{value:t.otpConfirmToken,callback:function(e){t.otpConfirmToken=e},expression:"otpConfirmToken"}})],1)],1),r("v-row",[r("v-col",[r("v-btn",{attrs:{color:"success",block:""},domProps:{textContent:t._s(t.$t("users.OtpEnable"))},on:{click:t.confirmOtpEnroll}})],1)],1)],1),r("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[r("img",{staticStyle:{width:"100%","max-width":"300px"},attrs:{src:t.otpEnroll.qrCode}})])],1)],1),r("ui-overlay",{attrs:{card:"",closable:"",title:t.$t("users.OtpDisable")},model:{value:t.otpDisabling,callback:function(e){t.otpDisabling=e},expression:"otpDisabling"}},[r("v-row",[r("v-col",[r("ui-input",{attrs:{autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirmOtpDisable.apply(null,arguments)}},model:{value:t.otpConfirmToken,callback:function(e){t.otpConfirmToken=e},expression:"otpConfirmToken"}})],1)],1),r("v-row",[r("v-col",[r("v-btn",{attrs:{color:"error",block:""},domProps:{textContent:t._s(t.$t("users.OtpDisable"))},on:{click:t.confirmOtpDisable}})],1)],1)],1)],1)},o=[],s=r("1da1"),a=(r("96cf"),r("61f7")),i={data:function(){return{username:"",email:"",confirmPassword:"",oldPassword:"",newPassword:"",confirmNewPassword:"",otpLoading:!0,otpActive:!1,otpConfirmToken:"",otpDisabling:!1,otpEnroll:{started:!1,secret:"",qrCode:""}}},computed:{validPassword:function(){return a["a"].validPassword(this.newPassword)},validUsername:function(){return a["a"].validUsername(this.username)},validEmail:function(){return a["a"].validEmail(this.email)},canSubmitInfoChange:function(){return this.validUsername&&this.validEmail&&this.confirmPassword},canSubmitPassChange:function(){return this.oldPassword&&this.validPassword&&this.newPassword===this.confirmNewPassword}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getSelf();case 2:return r=e.sent,t.username=r.username,t.email=r.email,e.next=7,t.$api.getOtp();case 7:t.otpActive=e.sent,t.otpLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},methods:{submitInfoChange:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.updateSelf(t.username,t.email,t.confirmPassword);case 2:t.$toast.success(t.$t("users.InfoChanged"));case 3:case"end":return e.stop()}}),e)})))()},submitPassChange:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.updatePassword(t.oldPassword,t.newPassword);case 2:t.$toast.success(t.$t("users.PasswordChanged"));case 3:case"end":return e.stop()}}),e)})))()},getOtpBtnColor:function(){if(!this.otpLoading)return this.otpActive?"error":"success"},toggleOtp:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.otpActive){e.next=4;break}t.otpDisabling=!0,e.next=8;break;case 4:return e.next=6,t.$api.startOtpEnroll();case 6:r=e.sent,t.otpEnroll={started:!0,secret:r.secret,qrCode:r.img};case 8:case"end":return e.stop()}}),e)})))()},confirmOtpEnroll:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.validateOtpEnroll(t.otpConfirmToken);case 2:r=e.sent,r&&(t.otpEnroll.started=!1,t.otpActive=!0),t.otpConfirmToken="";case 5:case"end":return e.stop()}}),e)})))()},confirmOtpDisable:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.disableOtp(t.otpConfirmToken);case 2:r=e.sent,r&&(t.otpDisabling=!1,t.otpActive=!1),t.otpConfirmToken="";case 5:case"end":return e.stop()}}),e)})))()}}},c=i,l=r("2877"),u=r("6544"),d=r.n(u),p=r("8336"),m=r("b0af"),v=r("99d9"),f=r("62ad"),w=r("a523"),b=r("0fd9"),h=Object(l["a"])(c,n,o,!1,null,null,null);e["default"]=h.exports;d()(h,{VBtn:p["a"],VCard:m["a"],VCardText:v["c"],VCardTitle:v["d"],VCol:f["a"],VContainer:w["a"],VRow:b["a"]})}}]);
//# sourceMappingURL=chunk-3d8c43c0-legacy.7ee5c1cb.js.map