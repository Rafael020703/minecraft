(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac239"],{"17eb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",[a("v-card",[a("v-card-title",[a("span",{domProps:{textContent:e._s(e.$t(e.create?"templates.New":"templates.Edit"))}}),a("div",{staticClass:"flex-grow-1"}),a("v-btn-toggle",{attrs:{borderless:"",dense:"",mandatory:""},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[a("v-btn",{attrs:{disabled:e.loading,value:"editor"},domProps:{textContent:e._s(e.$t("templates.Editor"))}}),a("v-btn",{attrs:{disabled:e.loading,value:"json"},domProps:{textContent:e._s(e.$t("templates.Json"))}})],1)],1),a("v-card-text",[a("v-row",[a("v-col",[a("ui-input",{attrs:{label:e.$t("common.Name"),disabled:!e.create},model:{value:e.template.name,callback:function(t){e.$set(e.template,"name",t)},expression:"template.name"}})],1)],1),"editor"===e.mode?a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("ui-input",{attrs:{label:e.$t("templates.Display")},model:{value:e.template.display,callback:function(t){e.$set(e.template,"display",t)},expression:"template.display"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("ui-input",{attrs:{label:e.$t("templates.Type")},model:{value:e.template.type,callback:function(t){e.$set(e.template,"type",t)},expression:"template.type"}})],1)],1):e._e(),e.loading?a("v-row",[a("v-col",{attrs:{offset:"5",cols:"2"}},[a("v-progress-circular",{staticClass:"mr-2",attrs:{indeterminate:""}}),a("strong",{domProps:{textContent:e._s(e.$t("common.Loading"))}})],1)],1):e._e()],1)],1)],1)],1),e.loading?e._e():a("div",["editor"===e.mode?a("template-editor",{model:{value:e.template,callback:function(t){e.template=t},expression:"template"}}):a("v-row",[a("v-col",[a("ace",{ref:"editor",attrs:{"editor-id":"edit"+e.template.name,height:"50vh",lang:"json"},model:{value:e.templateJson,callback:function(t){e.templateJson=t},expression:"templateJson"}})],1)],1),a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"success",large:"",block:"",disabled:!e.template.name||""===e.template.name.trim()},domProps:{textContent:e._s(e.$t("common.Save"))},on:{click:e.save}})],1)],1),a("v-row",[a("v-col",[e.create?e._e():a("v-btn",{attrs:{color:"error",block:""},domProps:{textContent:e._s(e.$t("common.Delete"))},on:{click:function(t){return e.remove()}}})],1)],1)],1),a("ui-overlay",{attrs:{card:""},model:{value:e.offerV1Convert,callback:function(t){e.offerV1Convert=t},expression:"offerV1Convert"}},[a("v-row",{staticClass:"mb-8"},[a("v-col",{attrs:{cols:"12"}},[a("h2",{domProps:{textContent:e._s(e.$t("templates.OfferV1Convert"))}})])],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:e._s(e.$t("common.Cancel"))},on:{click:function(t){e.offerV1Convert=!1}}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-btn",{attrs:{block:""},domProps:{textContent:e._s(e.$t("common.Ignore"))},on:{click:function(t){e.offerV1Convert=!1,e.skipNextV1Check=!0}}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-btn",{attrs:{block:"",color:"success"},domProps:{textContent:e._s(e.$t("templates.Convert"))},on:{click:function(t){return e.convertV1()}}})],1)],1)],1)],1)},n=[],o=a("1da1"),s=(a("b0c0"),a("498a"),a("d3b7"),a("a15b"),a("ac1f"),a("5319"),a("e9c4"),a("96cf"),{data:function(){return{loading:!1,create:void 0===this.$route.params.id,mode:"editor",templateJson:"",template:{name:"",type:"",display:"",command:"",stop:{},vars:[],install:[],pre:[],post:[],envVars:{},defaultEnv:{},supportedEnvs:[]},offerV1Convert:!1,skipNextV1Check:!1}},watch:{mode:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("editor"!==e){a.next=6;break}if(!t.catchV1()){a.next=3;break}return a.abrupt("return");case 3:t.template=t.$api.templateFromApiJson(t.templateJson),a.next=8;break;case 6:t.templateJson=t.$api.templateToApiJson(t.template),t.$refs.editor&&t.$refs.editor.ready&&t.$refs.editor.setValue(t.templateJson);case 8:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.create||this.loadData()},methods:{loadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$api.getTemplate(e.$route.params.id);case 3:e.template=t.sent,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},remove:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.create){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$api.deleteTemplate(e.template.name);case 4:e.$toast.success(e.$t("templates.Deleted")),e.$router.push({name:"Templates"});case 6:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.template.name&&""!==e.template.name.trim()){t.next=2;break}return t.abrupt("return");case 2:if("json"!==e.mode){t.next=6;break}if(!e.catchV1()){t.next=5;break}return t.abrupt("return");case 5:e.template=e.$api.templateFromApiJson(e.templateJson);case 6:return t.next=8,e.$api.saveTemplate(e.template.name,e.template);case 8:e.$toast.success(e.$t("templates.SaveSuccess")),e.create&&e.$router.push({name:"Template",params:{id:e.name}});case 10:case"end":return t.stop()}}),t)})))()},catchV1:function(){var e=this.skipNextV1Check;return this.skipNextV1Check=!1,"[object Object]"===Object.prototype.toString.call((JSON.parse(this.templateJson)||{}).pufferd)&&!e&&(this.offerV1Convert=!0,!0)},convertV1:function(){var e=JSON.parse(this.templateJson).pufferd;e.install=e.install.commands,e.run.command=e.run.program+" "+e.run.arguments.join(" "),delete e.run.program,delete e.run.arguments,e.supportedEnvironments=[e.environment],e.name=e.display.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-");while("-"===e.name.substring(0,1))e.name=e.name.substring(1);while("-"===e.name.substring(e.name.length-1))e.name=e.name.substring(0,e.name.length-1);this.templateJson=JSON.stringify(e,void 0,2).replace(/\$\{rootdir}/g,"${rootDir}"),this.$refs.editor&&this.$refs.editor.ready&&this.$refs.editor.setValue(this.templateJson),this.template=this.$api.templateFromApiJson(this.templateJson),this.offerV1Convert=!1}}}),l=s,i=a("2877"),c=a("6544"),m=a.n(c),p=a("8336"),u=a("a609"),d=a("b0af"),v=a("99d9"),f=a("62ad"),b=a("490a"),h=a("0fd9"),g=Object(i["a"])(l,r,n,!1,null,null,null);t["default"]=g.exports;m()(g,{VBtn:p["a"],VBtnToggle:u["a"],VCard:d["a"],VCardText:v["c"],VCardTitle:v["d"],VCol:f["a"],VProgressCircular:b["a"],VRow:h["a"]})}}]);
//# sourceMappingURL=chunk-2d0ac239-legacy.ad70c620.js.map