(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e68b3"],{"98ca":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("h1",{domProps:{textContent:t._s(t.$t("templates.Templates"))}}),o("v-row",[o("v-col",[o("v-list",{staticClass:"pt-2",attrs:{subheader:"",elevation:"1"}},[t._l(t.templates,(function(e,a,s){return o("div",{key:a},[1!==Object.keys(t.templates).length?o("v-subheader",{class:t.$isDark()?t.headerClasses.dark:t.headerClasses.light,domProps:{textContent:t._s(a)}}):t._e(),t._l(t.templates[a],(function(e){return o("div",{key:e.name},[o("v-list-item",{attrs:{to:t.hasScope("templates.edit")||t.isAdmin()?{name:"Template",params:{id:e.name}}:void 0}},[o("v-list-item-content",[o("v-list-item-title",{domProps:{textContent:t._s(e.display)}})],1)],1)],1)})),s!==Object.keys(t.templates).length-1?o("v-divider"):t._e()],2)})),0===Object.keys(t.templates).length?o("div",{staticClass:"pt-2 text-center text--disabled"},[t.loading?o("span",{domProps:{textContent:t._s(t.$t("common.Loading"))}}):o("span",{domProps:{textContent:t._s(t.$t("templates.NoTemplates"))}})]):t._e()],2),o("div",{staticStyle:{position:"fixed",bottom:"16px",right:"16px",display:"flex","flex-direction":"column","align-items":"center"}},[o("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.hasScope("templates.edit")||t.isAdmin(),expression:"hasScope('templates.edit') || isAdmin()"}],staticClass:"mb-4",attrs:{color:"primary",fab:"",dark:"",small:""},on:{click:t.loadTemplateImporter}},a),[o("v-icon",[t._v("mdi-import")])],1)]}}])},[o("span",{domProps:{textContent:t._s(t.$t("templates.import.Tooltip"))}})]),o("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.hasScope("templates.edit")||t.isAdmin(),expression:"hasScope('templates.edit') || isAdmin()"}],attrs:{color:"primary",fab:"",dark:"",large:"",to:{name:"AddTemplate"}}},[o("v-icon",[t._v("mdi-plus")])],1)],1)],1)],1),o("ui-overlay",{attrs:{card:"",closable:"",title:t.$t("templates.import.Import")},model:{value:t.showTemplateImporter,callback:function(e){t.showTemplateImporter=e},expression:"showTemplateImporter"}},[o("v-alert",{attrs:{border:"bottom",text:"",type:"warning",dense:""}},[t._v(" "+t._s(t.$t("templates.import.CommunityWarning"))+" ")]),o("v-alert",{attrs:{border:"bottom",text:"",type:"warning",dense:""}},[t._v(" "+t._s(t.$t("templates.import.OverrideWarning"))+" ")]),o("v-autocomplete",{attrs:{items:t.importableTemplates,chips:"",label:t.$t("templates.import.Select"),multiple:"",clearable:"","deletable-chips":"","hide-selected":"",outlined:"","open-on-clear":""},model:{value:t.templatesToImport,callback:function(e){t.templatesToImport=e},expression:"templatesToImport"}}),o("v-row",[o("v-col",[o("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:t._s(t.$t("common.Cancel"))},on:{click:function(e){t.showTemplateImporter=!1}}})],1),o("v-col",[o("v-btn",{attrs:{block:"",color:"success"},domProps:{textContent:t._s(t.$t("templates.import.Import"))},on:{click:function(e){return t.doImports()}}})],1)],1)],1),o("ui-overlay",{attrs:{card:"",closable:"",title:t.$t("templates.import.NoTemplatesTitle")},model:{value:t.offerImport,callback:function(e){t.offerImport=e},expression:"offerImport"}},[o("v-row",[o("v-col",[o("span",{domProps:{innerHTML:t._s(t.$t("templates.import.NoTemplatesContent"))}})])],1),o("v-row",[o("v-col",[o("v-btn",{attrs:{block:"",color:"error"},domProps:{textContent:t._s(t.$t("common.Cancel"))},on:{click:function(e){return t.importDeclined()}}})],1),o("v-col",[o("v-btn",{attrs:{block:"",color:"success"},domProps:{textContent:t._s(t.$t("templates.import.Import"))},on:{click:function(e){t.offerImport=!1,t.loadTemplateImporter()}}})],1)],1)],1)],1)},s=[],l={data(){return{loading:!0,templates:{},headerClasses:{light:"body-1 grey font-weight-bold lighten-4 black--text",dark:"body-1 grey font-weight-bold darken-4 white--text"},offerImport:!1,showTemplateImporter:!1,importableTemplates:[],templatesToImport:[],unproxiedTheme:this.$vuetify.theme}},mounted(){this.loadData();const t=new Proxy(this.$vuetify.theme,{set:(t,e,o)=>(this.$forceUpdate(),t[e]=o,!0)});this.$vuetify.theme=t},beforeDestroy(){this.$vuetify.theme=this.unproxiedTheme},methods:{async loadData(){this.loading=!0,this.templates={};const t=await this.$api.getTemplates();t.map(t=>{t.display||(t.display=t.name),t.type||(t.type="none"),this.templates[t.type]||(this.templates[t.type]=[]),this.templates[t.type].push(t)});const e=Object.keys(this.templates),o=e.indexOf("other");-1!==o&&this.$delete(e,o),e.map(t=>{1===this.templates[t].length&&(this.templates.other||(this.templates.other=[]),this.templates.other.push(this.templates[t][0]),delete this.templates[t])}),this.templates={...this.templates},this.loading=!1,0===t.length&&"false"!==localStorage.getItem("offerTemplateImport")&&(this.offerImport=!0)},async loadTemplateImporter(){this.importableTemplates=[],this.templatesToImport=[],this.importableTemplates=await this.$api.getImportableTemplates(),this.showTemplateImporter=!0},doImports(){const t=this;t.loading=!0,t.showTemplateImporter=!1,t.$toast.info(this.$t("templates.import.Started")),t.templatesToImport.reduce((e,o)=>e.finally(()=>t.importTemplate(t,o)),Promise.resolve()).finally(()=>{t.loadData()})},async importTemplate(t,e){await t.$api.importTemplate(e),t.$toast.success(t.$t("templates.import.Successful",{template:e}))},importDeclined(){this.offerImport=!1,localStorage.setItem("offerTemplateImport","false")}}},r=l,i=o("2877"),m=o("6544"),p=o.n(m),n=o("0798"),c=o("c6a6"),d=o("8336"),h=o("62ad"),v=o("a523"),u=o("ce7e"),f=o("132d"),b=o("8860"),T=o("da13"),y=o("5d23"),I=o("0fd9"),w=o("e0c7"),g=o("3a2f"),x=Object(i["a"])(r,a,s,!1,null,null,null);e["default"]=x.exports;p()(x,{VAlert:n["a"],VAutocomplete:c["a"],VBtn:d["a"],VCol:h["a"],VContainer:v["a"],VDivider:u["a"],VIcon:f["a"],VList:b["a"],VListItem:T["a"],VListItemContent:y["a"],VListItemTitle:y["c"],VRow:I["a"],VSubheader:w["a"],VTooltip:g["a"]})}}]);
//# sourceMappingURL=chunk-2d0e68b3.b97e08d9.js.map