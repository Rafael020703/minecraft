(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b3289"],{"26d3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{loading:t.panelSettingsLoading,disabled:t.panelSettingsLoading}},[a("v-card-title",{domProps:{textContent:t._s(t.$t("settings.PanelSettings"))}}),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("ui-input",{attrs:{"end-icon":"mdi-auto-fix",label:t.$t("settings.MasterUrl"),hint:t.$t("settings.MasterUrlHint")},on:{"click:append":t.autofillMasterUrl},model:{value:t.masterUrl,callback:function(e){t.masterUrl=e},expression:"masterUrl"}})],1),a("v-col",{attrs:{cols:"12"}},[a("ui-input",{attrs:{label:t.$t("settings.CompanyName")},model:{value:t.panelTitle,callback:function(e){t.panelTitle=e},expression:"panelTitle"}})],1),a("v-col",{attrs:{cols:"12"}},[a("ui-select",{attrs:{label:t.$t("settings.DefaultTheme"),items:t.themes},model:{value:t.defaultTheme,callback:function(e){t.defaultTheme=e},expression:"defaultTheme"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{staticClass:"mt-0",attrs:{label:t.$t("settings.RegistrationEnabled"),"error-count":2,messages:[t.$t("settings.RegistrationEnabledHint1"),t.$t("settings.RegistrationEnabledHint2")]},model:{value:t.registrationEnabled,callback:function(e){t.registrationEnabled=e},expression:"registrationEnabled"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{large:"",block:"",color:"success"},domProps:{textContent:t._s(t.$t("common.Save"))},on:{click:function(e){return t.savePanelConfig()}}})],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{loading:t.emailSettingsLoading,disabled:t.emailSettingsLoading}},[a("v-card-title",{domProps:{textContent:t._s(t.$t("settings.EmailSettings"))}}),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("ui-select",{attrs:{label:t.$t("settings.EmailProvider"),items:t.emailProviders},model:{value:t.emailProvider,callback:function(e){t.emailProvider=e},expression:"emailProvider"}})],1),t._l(t.emailFields,(function(e){return a("v-col",{key:e,attrs:{cols:"12"}},[a("ui-input",{attrs:{label:t.$t("settings.emailFields."+e)},model:{value:t.email[e],callback:function(a){t.$set(t.email,e,a)},expression:"email[key]"}})],1)})),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{large:"",block:"",color:"success"},domProps:{textContent:t._s(t.$t("common.Save"))},on:{click:function(e){return t.saveEmailConfig()}}})],1)],2)],1)],1)],1)],1)],1)},s=[];const l={none:[],smtp:["from","host","username","password"],mailgun:["domain","from","key"],mailjet:["domain","from","key"]};var n={data(){return{panelSettingsLoading:!0,masterUrl:"",panelTitle:"",defaultTheme:"",registrationEnabled:!0,themes:["PufferPanel"],emailSettingsLoading:!0,emailProvider:"none",emailProviders:[],emailFields:[],email:{from:"",domain:"",key:"",host:"",username:"",password:""}}},watch:{emailProvider(t){this.emailFields=l[t]}},mounted(){Object.keys(l).map(t=>{this.emailProviders.push({text:this.$t("settings.emailProviders."+t),value:t})}),this.loadData()},beforeDestroy(){0},methods:{async loadData(){this.masterUrl=await this.$api.getSetting("panel.settings.masterUrl"),this.panelTitle=await this.$api.getSetting("panel.settings.companyName"),this.defaultTheme=await this.$api.getSetting("panel.settings.defaultTheme"),this.themes=(await this.$api.getConfig()).themes.available;const t=await this.$api.getSetting("panel.registrationEnabled");this.registrationEnabled="true"===t.toString(),this.panelSettingsLoading=!1,this.emailProvider=await this.$api.getSetting("panel.email.provider"),Object.keys(this.email).map(async t=>{this.email[t]=await this.$api.getSetting("panel.email."+t)}),this.emailSettingsLoading=!1},autofillMasterUrl(){this.masterUrl=window.location.origin},async savePanelConfig(){this.panelSettingsLoading=!0;try{await this.$api.setSettings({"panel.settings.masterUrl":this.masterUrl,"panel.settings.companyName":this.panelTitle,"panel.settings.defaultTheme":this.defaultTheme,"panel.registrationEnabled":this.registrationEnabled}),this.$toast.success(this.$t("common.Saved"))}finally{this.panelSettingsLoading=!1}this.loadData()},async saveEmailConfig(){this.emailSettingsLoading=!0;try{const t={"panel.email.provider":this.emailProvider};Object.keys(this.email).map(e=>{t["panel.email."+e]=this.email[e]}),await this.$api.setSettings(t),this.$toast.success(this.$t("common.Saved"))}finally{this.emailSettingsLoading=!1}this.loadData()}}},o=n,r=a("2877"),m=a("6544"),c=a.n(m),d=a("8336"),g=a("b0af"),p=a("99d9"),h=a("ac7c"),u=a("62ad"),v=a("a523"),b=a("0fd9"),f=Object(r["a"])(o,i,s,!1,null,null,null);e["default"]=f.exports;c()(f,{VBtn:d["a"],VCard:g["a"],VCardText:p["c"],VCardTitle:p["d"],VCheckbox:h["a"],VCol:u["a"],VContainer:v["a"],VRow:b["a"]})}}]);
//# sourceMappingURL=chunk-2d0b3289.6ee4b25b.js.map