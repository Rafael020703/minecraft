(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d89b4ab"],{"0c50":function(s,e,r){"use strict";r.r(e);var t=function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("v-col",{attrs:{lg:"4",md:"6",sm:"8","offset-lg":"4","offset-md":"3","offset-sm":"2"}},[r("v-card",{attrs:{loading:s.registerDisabled}},[r("v-card-title",{staticClass:"d-flex justify-center"},[r("p",{domProps:{textContent:s._s(s.$t("users.Register"))}})]),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("ui-input",{attrs:{autofocus:"",label:s.$t("users.Username"),"error-messages":s.username&&!s.validUsername?s.$t("errors.ErrUsernameRequirements",{min:5}):s.errors.username,icon:"mdi-account"},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.submit.apply(null,arguments)}},model:{value:s.username,callback:function(e){s.username="string"===typeof e?e.trim():e},expression:"username"}})],1),r("v-col",{attrs:{cols:"12"}},[r("ui-input",{attrs:{disabled:"",label:s.$t("users.Email"),icon:"mdi-email",type:"email"},model:{value:s.email,callback:function(e){s.email="string"===typeof e?e.trim():e},expression:"email"}})],1),r("v-col",{attrs:{cols:"12"}},[r("ui-password-input",{attrs:{label:s.$t("users.Password"),"error-messages":s.password&&!s.validPassword?s.$t("errors.ErrPasswordRequirements",{min:8}):s.errors.password},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.submit.apply(null,arguments)}},model:{value:s.password,callback:function(e){s.password=e},expression:"password"}})],1),r("v-col",{attrs:{cols:"12"}},[r("ui-password-input",{attrs:{label:s.$t("users.ConfirmPassword"),"error-messages":""===s.confirmPassword||s.samePassword?"":s.$t("errors.ErrPasswordsNotIdentical")},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.submit.apply(null,arguments)}},model:{value:s.confirmPassword,callback:function(e){s.confirmPassword=e},expression:"confirmPassword"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{color:"primary",large:"",block:"",disabled:!s.canComplete},domProps:{textContent:s._s(s.$t("users.Register"))},on:{click:s.submit}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{attrs:{text:"",block:"",to:{name:"Login"}},domProps:{textContent:s._s(s.$t("users.LoginLink"))}})],1)],1)],1)],1)],1)},a=[],i=r("61f7"),o={data(){return{username:"",email:this.$route.query.email,password:"",confirmPassword:"",registerDisabled:!1,errors:{username:"",password:""}}},computed:{canComplete(){return!this.registerDisabled&&(!(!this.username||!this.validUsername)&&!(!this.validPassword||!this.samePassword))},validPassword(){return i["a"].validPassword(this.password)},samePassword(){return i["a"].samePassword(this.password,this.confirmPassword)},validUsername(){return i["a"].validUsername(this.username)}},mounted(){this.hasAuth()&&this.$router.push({name:"Servers"})},methods:{async submit(){if(this.errors.username="",this.errors.password="",!this.username)return void(this.errors.username=this.$t("errors.ErrFieldRequired",{field:this.$t("users.Username")}));if(!this.password)return void(this.errors.password=this.$t("errors.ErrFieldRequired",{field:this.$t("users.Password")}));if(!i["a"].validPassword(this.password))return;this.registerDisabled=!0;let s="verifyToken";try{await this.$api.login(this.email,this.$route.query.token,{silent:!0}),s="update",await this.$api.updateSelf(this.username,this.email,this.$route.query.token,{noToast:!0}),await this.$api.updatePassword(this.$route.query.token,this.password,{noToast:!0}),s="login",await this.$api.login(this.email,this.password,{noToast:!0}),this.$emit("logged-in"),this.$router.push({name:"Servers"})}catch{"verifyToken"===s?this.$toast.error(this.$t("errors.ErrInviteLinkInvalid")):"update"===s?this.$toast.error(this.$t("errors.ErrSavingInvitedUser")):(this.$toast.success(this.$t("users.RegisterSuccess")),this.$router.push({name:"Login"}))}finally{this.registerDisabled=!1}}}},n=o,l=r("2877"),d=r("6544"),u=r.n(d),m=r("8336"),c=r("b0af"),p=r("99d9"),h=r("62ad"),w=r("0fd9"),f=Object(l["a"])(n,t,a,!1,null,null,null);e["default"]=f.exports;u()(f,{VBtn:m["a"],VCard:c["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:h["a"],VRow:w["a"]})},"61f7":function(s,e,r){"use strict";e["a"]={validPassword:s=>s.length>=8,samePassword:(s,e)=>s&&e&&s===e,validUsername:s=>s&&/^([0-9A-Za-z_-]){5,}$/.test(s),validEmail:s=>s&&/^\S+@\S+\.\S+$/.test(s)}}}]);
//# sourceMappingURL=chunk-3d89b4ab.19a1d245.js.map