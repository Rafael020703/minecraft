(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d8c43c0"],{"61f7":function(t,s,o){"use strict";s["a"]={validPassword:t=>t.length>=8,samePassword:(t,s)=>t&&s&&t===s,validUsername:t=>t&&/^([0-9A-Za-z_-]){5,}$/.test(t),validEmail:t=>t&&/^\S+@\S+\.\S+$/.test(t)}},"77be":function(t,s,o){"use strict";o.r(s);var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-card",[o("v-card-title",{domProps:{textContent:t._s(t.$t("users.ChangeInfo"))}}),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("ui-input",{attrs:{icon:"mdi-account",label:t.$t("users.Username")},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}})],1),o("v-col",{attrs:{cols:"12"}},[o("ui-input",{attrs:{icon:"mdi-email",label:t.$t("users.Email"),type:"email"},model:{value:t.email,callback:function(s){t.email=s},expression:"email"}})],1),o("v-col",{attrs:{cols:"12"}},[o("ui-password-input",{attrs:{label:t.$t("users.ConfirmPassword")},model:{value:t.confirmPassword,callback:function(s){t.confirmPassword=s},expression:"confirmPassword"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{large:"",block:"",color:"success",disabled:!t.canSubmitInfoChange},domProps:{textContent:t._s(t.$t("users.ChangeInfo"))},on:{click:t.submitInfoChange}})],1)],1)],1)],1)],1),o("v-col",{attrs:{cols:"12",md:"6"}},[o("v-card",[o("v-card-title",{domProps:{textContent:t._s(t.$t("users.ChangePassword"))}}),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("ui-password-input",{attrs:{label:t.$t("users.OldPassword")},model:{value:t.oldPassword,callback:function(s){t.oldPassword=s},expression:"oldPassword"}})],1),o("v-col",{attrs:{cols:"12"}},[o("ui-password-input",{attrs:{label:t.$t("users.NewPassword")},model:{value:t.newPassword,callback:function(s){t.newPassword=s},expression:"newPassword"}})],1),o("v-col",{attrs:{cols:"12"}},[o("ui-password-input",{attrs:{label:t.$t("users.ConfirmPassword")},model:{value:t.confirmNewPassword,callback:function(s){t.confirmNewPassword=s},expression:"confirmNewPassword"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{large:"",block:"",color:"success",disabled:!t.canSubmitPassChange},domProps:{textContent:t._s(t.$t("users.ChangePassword"))},on:{click:t.submitPassChange}})],1)],1)],1)],1)],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-card",[o("v-card-title",[o("span",{domProps:{textContent:t._s(t.$t("users.Otp"))}}),o("span",{staticClass:"flex-grow-1"}),o("v-btn",{attrs:{loading:t.otpLoading,disabled:t.otpLoading,color:t.getOtpBtnColor()},domProps:{textContent:t._s(t.otpActive?t.$t("users.OtpDisable"):t.$t("users.OtpEnable"))},on:{click:t.toggleOtp}})],1),o("v-card-text",{domProps:{textContent:t._s(t.$t("users.OtpHint"))}})],1)],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("ui-oauth")],1)],1),o("ui-overlay",{attrs:{card:"",closable:"",title:t.$t("users.OtpSetup")},model:{value:t.otpEnroll.started,callback:function(s){t.$set(t.otpEnroll,"started",s)},expression:"otpEnroll.started"}},[o("v-row",[o("v-col",[o("v-row",[o("v-col",[o("h3",{domProps:{textContent:t._s(t.$t("users.OtpSetupHint"))}})])],1),o("v-row",[o("v-col",[o("h4",{domProps:{textContent:t._s(t.$t("users.OtpSecret"))}})])],1),o("v-row",[o("v-col",[o("span",{domProps:{textContent:t._s(t.otpEnroll.secret)}})])],1),o("v-row",[o("v-col",[o("h3",{domProps:{textContent:t._s(t.$t("users.OtpConfirm"))}})])],1),o("v-row",[o("v-col",[o("ui-input",{attrs:{autofocus:""},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.confirmOtpEnroll.apply(null,arguments)}},model:{value:t.otpConfirmToken,callback:function(s){t.otpConfirmToken=s},expression:"otpConfirmToken"}})],1)],1),o("v-row",[o("v-col",[o("v-btn",{attrs:{color:"success",block:""},domProps:{textContent:t._s(t.$t("users.OtpEnable"))},on:{click:t.confirmOtpEnroll}})],1)],1)],1),o("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[o("img",{staticStyle:{width:"100%","max-width":"300px"},attrs:{src:t.otpEnroll.qrCode}})])],1)],1),o("ui-overlay",{attrs:{card:"",closable:"",title:t.$t("users.OtpDisable")},model:{value:t.otpDisabling,callback:function(s){t.otpDisabling=s},expression:"otpDisabling"}},[o("v-row",[o("v-col",[o("ui-input",{attrs:{autofocus:""},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.confirmOtpDisable.apply(null,arguments)}},model:{value:t.otpConfirmToken,callback:function(s){t.otpConfirmToken=s},expression:"otpConfirmToken"}})],1)],1),o("v-row",[o("v-col",[o("v-btn",{attrs:{color:"error",block:""},domProps:{textContent:t._s(t.$t("users.OtpDisable"))},on:{click:t.confirmOtpDisable}})],1)],1)],1)],1)},a=[],r=o("61f7"),n={data(){return{username:"",email:"",confirmPassword:"",oldPassword:"",newPassword:"",confirmNewPassword:"",otpLoading:!0,otpActive:!1,otpConfirmToken:"",otpDisabling:!1,otpEnroll:{started:!1,secret:"",qrCode:""}}},computed:{validPassword(){return r["a"].validPassword(this.newPassword)},validUsername(){return r["a"].validUsername(this.username)},validEmail(){return r["a"].validEmail(this.email)},canSubmitInfoChange(){return this.validUsername&&this.validEmail&&this.confirmPassword},canSubmitPassChange(){return this.oldPassword&&this.validPassword&&this.newPassword===this.confirmNewPassword}},async mounted(){const t=await this.$api.getSelf();this.username=t.username,this.email=t.email,this.otpActive=await this.$api.getOtp(),this.otpLoading=!1},methods:{async submitInfoChange(){await this.$api.updateSelf(this.username,this.email,this.confirmPassword),this.$toast.success(this.$t("users.InfoChanged"))},async submitPassChange(){await this.$api.updatePassword(this.oldPassword,this.newPassword),this.$toast.success(this.$t("users.PasswordChanged"))},getOtpBtnColor(){if(!this.otpLoading)return this.otpActive?"error":"success"},async toggleOtp(){if(this.otpActive)this.otpDisabling=!0;else{const t=await this.$api.startOtpEnroll();this.otpEnroll={started:!0,secret:t.secret,qrCode:t.img}}},async confirmOtpEnroll(){const t=await this.$api.validateOtpEnroll(this.otpConfirmToken);t&&(this.otpEnroll.started=!1,this.otpActive=!0),this.otpConfirmToken=""},async confirmOtpDisable(){const t=await this.$api.disableOtp(this.otpConfirmToken);t&&(this.otpDisabling=!1,this.otpActive=!1),this.otpConfirmToken=""}}},i=n,l=o("2877"),c=o("6544"),d=o.n(c),p=o("8336"),u=o("b0af"),m=o("99d9"),v=o("62ad"),w=o("a523"),f=o("0fd9"),h=Object(l["a"])(i,e,a,!1,null,null,null);s["default"]=h.exports;d()(h,{VBtn:p["a"],VCard:u["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:v["a"],VContainer:w["a"],VRow:f["a"]})}}]);
//# sourceMappingURL=chunk-3d8c43c0.6d58853c.js.map